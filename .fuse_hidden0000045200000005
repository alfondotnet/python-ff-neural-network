#!/bin/bash

function signal_mata_cam(){
   kill -s 9 $PIDcam
   kill -s 9 $PIDscript

}

trap signal_mata_cam SIGINT

echo "[[[[[[[ TRAINING SET CONSTRUCTOR v1.50 by fonaer1 ]]]]]]]]]"\n\n
echo "ABRIENDO WEBCAM"
PIDscript=$$
python2.7 camdesk.py &
PIDcam=$!

ARPOS=( "frente" "arriba" "abajo" )
AROJOS=( "abiertos" "cerrados" "gafas" )
ARGESTO=( "sonriendo" "serio" "lengua" )
I=5

while [ $I -gt 0 ];do

echo "Quien eres?: FON"
persona="fon"

echo "Posicion cara (frente,arriba,abajo): "
posicion=${ARPOS[$( $RANDOM % 3 )]}

echo "ojos (abiertos,cerrados,gafas): "
ojos=${AROJOS[$( $RANDOM % 3 )]}

echo "Gesto (sonriendo,serio,lengua): "
gesto=${ARGESTO[$( $RANDOM % 3 )]}

echo "FOTO (fotos/test): "
foto="fotos"

echo $persona $posicion $gesto $ojos $foto

echo "AHORA PULSA F3 y ENTER"
read aaa

done

convert temp.jpeg -resize 30x30 -colorspace gray -compress none -depth 8 $foto/$persona-$posicion-$ojos-$gesto-`echo $RANDOM`.pgm
rm temp.jpeg

kill $PID   
